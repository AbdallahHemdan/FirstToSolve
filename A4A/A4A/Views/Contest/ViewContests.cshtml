@using A4A.DataAccess
@model IEnumerable<A4A.Models.ContestModel>

@{
    ViewBag.Title = "ViewContests";
    if (ViewBag.ID == 0 || ViewBag.ID == null)
    {
        Layout = "~/Views/Shared/_Layout.cshtml";
    }
    else
    {
        Layout = "~/Views/Shared/User_LayoutPage1.cshtml";
    }
    string UserName = ViewBag.UserName;
    int id = 0;
    int.TryParse(Convert.ToString(ViewBag.ID), out id);
}
<br />
<h2>🎯 Contests</h2>

<p>
	<br />
	<button style="margin-right:6px;" class="btn btn-outline-primary" onclick="location.href='@Url.Action("InsertContest", "Contest", new {id, UserName})';return false;">Create a new contest &raquo;</button>
	<button class="btn btn-outline-primary" onclick="location.href='@Url.Action("ViewMyContests", "Contest", new {id, UserName})';return false;">View my contests &raquo;</button>
</p>

<table id="dtBasicExample" class="table table-hover table-bordered " cellspacing="0">
    <tr class="table-primary">
        <th>
            @*@Html.DisplayNameFor(model => model.ContestName)*@
			Contest Name
        </th>
        <th>
            @*@Html.DisplayNameFor(model => model.ContestDate)*@
			Contest Date
        </th>
        <th>
            @*@Html.DisplayNameFor(model => model.ContestLength)*@
			Contest Length
        </th>
        <th>
            @*@Html.DisplayNameFor(model => model.ContestWriterName)*@
			Contest Writer
        </th>
		<th>
			🔎Explore
		</th>

    </tr>

    @foreach (var item in Model)
    {
        <tr>
            <td>
                @Html.DisplayFor(modelItem => item.ContestName)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.ContestDate)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.ContestLength)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.ContestWriterName)
            </td>
            <td>
                @Html.ActionLink("View", "ContestProblems", "Contest", new { ContestID = item.ContestID, id = id, UserName = UserName }, null)
            </td>
            <td>
                @{
                    DBController db = new DBController();
                    if (db.SelectTypeById(ViewBag.ID) == "Admin")
                    {
                        @Html.ActionLink("Delete", "DeleteContest", new { ContestID = item.ContestID, id = ViewBag.ID, UserName = ViewBag.UserName })
                    }
                }
            </td>
        </tr>
    }

</table>

